{"mappings":"iiBAAA,IA0BQA,EAOAC,EAjCRC,EAAAC,EAAA,sBACMC,EAAUC,SAASC,cAAc,uBACjCC,EAAYF,SAASC,cAAc,YACnCE,EAASH,SAASC,cAAc,kBAChCG,EAAM,sBAEZD,EAAOE,iBAAiB,QAASC,EAAAC,EAAA,EAGjC,SAAqBC,GACnB,IAAwBC,EAAAD,EAAME,OAAtBC,EAAgBF,EAAhBE,KAAMC,EAAUH,EAAVG,MACRC,EAASC,KAAKC,MAAMC,aAAaC,QAAQb,IAE/C,GAAIS,EAAQ,CACV,IAAMK,EAAWrB,EAAAsB,aAAA,GACZN,EACHhB,EAAAuB,eAAA,GAACT,EAAOC,IAEVI,aAAaK,QAAQjB,EAAKU,KAAKQ,UAAUJ,SAGvCF,aAAaK,QAAQjB,EAAKU,KAAKQ,UATjB,CAAEC,MAAO,GAAIC,QAAS,QANa,MACvDrB,EAAOE,iBAAiB,UAgCxB,SAAsBoB,GACpB,IAAMC,EAAWZ,KAAKC,MAAMC,aAAaC,QAAQb,IAMjD,GALAqB,EAAIE,kBAKCX,aAAaC,QAAQb,IAA6B,KAArBsB,EAASF,SAAqC,KAAnBE,EAASH,MAEpE,YADAK,MAAM,0BAGNH,EAAIf,OAAOmB,QACbb,aAAac,WAAW1B,GACxB2B,QAAQC,IAAIN,OA1BN/B,EAAYmB,KAAKC,MAAMC,aAAaC,QAAQb,OAEhDL,EAAQa,MAAQjB,EAAU4B,QAKtB3B,EAAckB,KAAKC,MAAMC,aAAaC,QAAQb,OAEhDF,EAAUU,MAAQhB,EAAY4B","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\nconst emailEl = document.querySelector(\"input[type='email']\");\nconst messageEl = document.querySelector(\"textarea\");\nconst formEl = document.querySelector(\".feedback-form\");\nconst KEY = 'feedback-form-state';\n\nformEl.addEventListener('input', throttle(onTextInput, 500));\nformEl.addEventListener(\"submit\", onFormSubmit);\n\nfunction onTextInput(event) {\n  const { name, value } = event.target;\n  const parsed = JSON.parse(localStorage.getItem(KEY));\n   const formData = { email: '', message: '' };\n  if (parsed) {\n    const formData = {\n      ...parsed,\n      [name]: value,\n    };\n    localStorage.setItem(KEY, JSON.stringify(formData));\n  } else {\n    // formData = { [name]: value };\n      localStorage.setItem(KEY, JSON.stringify(formData));\n  }\n}\n\nfunction emailInput() {\n  const saveEmail = JSON.parse(localStorage.getItem(KEY));\n  if (saveEmail) {\n    emailEl.value = saveEmail.email;\n  }\n}\n\nfunction messageInput() {\n  const saveMessage = JSON.parse(localStorage.getItem(KEY));\n    if (saveMessage) {\n      messageEl.value = saveMessage.message;\n    }\n}\n\nfunction onFormSubmit(evn) {\n  const saveForm = JSON.parse(localStorage.getItem(KEY));\n  evn.preventDefault();\n  // if (saveForm.message === undefined || saveForm.email === undefined) {\n  //   alert('Не все поля заполнены!');\n  //   return;\n  // };\n  if (!localStorage.getItem(KEY) || saveForm.message === '' || saveForm.email === '') {\n    alert('Не все поля заполнены!');\n    return\n  }\n    evn.target.reset();\n  localStorage.removeItem(KEY);\n  console.log(saveForm);\n}\n\nemailInput();\nmessageInput();"],"names":["saveEmail","saveMessage","$8TSCy","parcelRequire","$b00c40859be242c5$var$emailEl","document","querySelector","$b00c40859be242c5$var$messageEl","$b00c40859be242c5$var$formEl","$b00c40859be242c5$var$KEY","addEventListener","$parcel$interopDefault","$dCfNN","event","_target","target","name","value","parsed","JSON","parse","localStorage","getItem","formData1","objectSpread","defineProperty","setItem","stringify","email","message","evn","saveForm","preventDefault","alert","reset","removeItem","console","log"],"version":3,"file":"03-feedback.7cbe26fb.js.map"}