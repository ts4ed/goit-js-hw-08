{"mappings":"iiBAAA,IAyBQA,EAOAC,EAhCRC,EAAAC,EAAA,sBACMC,EAAUC,SAASC,cAAc,uBACjCC,EAAYF,SAASC,cAAc,YACnCE,EAASH,SAASC,cAAc,kBAChCG,EAAM,sBAEZD,EAAOE,iBAAiB,QAASC,EAAAC,EAAA,EAGjC,SAAqBC,GACnB,IAAwBC,EAAAD,EAAME,OAAtBC,EAAgBF,EAAhBE,KAAMC,EAAUH,EAAVG,MACRC,EAASC,KAAKC,MAAMC,aAAaC,QAAQb,IAC/C,GAAIS,EAAQ,CACV,IAAMK,EAAWrB,EAAAsB,aAAA,GACZN,EACHhB,EAAAuB,eAAA,GAACT,EAAOC,IAEVI,aAAaK,QAAQjB,EAAKU,KAAKQ,UAAUJ,QACpC,CACL,IAAMK,EAAa1B,EAAAuB,eAAA,GAACT,EAAOC,GACzBI,aAAaK,QAAQjB,EAAKU,KAAKQ,UAAUC,OAdQ,MACvDpB,EAAOE,iBAAiB,UA+BxB,SAAsBmB,GACpB,IAAMC,EAAWX,KAAKC,MAAMC,aAAaC,QAAQb,IAEjD,GADAoB,EAAIE,sBACqBC,IAArBF,EAASG,cAA4CD,IAAnBF,EAASI,MAE7C,YADAC,MAAM,0BAGRN,EAAId,OAAOqB,QACXf,aAAagB,WAAW5B,GACxB6B,QAAQC,IAAIT,OAtBN9B,EAAYmB,KAAKC,MAAMC,aAAaC,QAAQb,OAEhDL,EAAQa,MAAQjB,EAAUkC,QAKtBjC,EAAckB,KAAKC,MAAMC,aAAaC,QAAQb,OAEhDF,EAAUU,MAAQhB,EAAYgC","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\nconst emailEl = document.querySelector(\"input[type='email']\");\nconst messageEl = document.querySelector(\"textarea\");\nconst formEl = document.querySelector(\".feedback-form\");\nconst KEY = 'feedback-form-state';\n\nformEl.addEventListener('input', throttle(onTextInput, 500));\nformEl.addEventListener(\"submit\", onFormSubmit);\n\nfunction onTextInput(event) {\n  const { name, value } = event.target;\n  const parsed = JSON.parse(localStorage.getItem(KEY));\n  if (parsed) {\n    const formData = {\n      ...parsed,\n      [name]: value,\n    };\n    localStorage.setItem(KEY, JSON.stringify(formData));\n  } else {\n    const formData = { [name]: value };\n      localStorage.setItem(KEY, JSON.stringify(formData));\n  }\n}\n\nfunction emailInput() {\n  const saveEmail = JSON.parse(localStorage.getItem(KEY));\n  if (saveEmail) {\n    emailEl.value = saveEmail.email;\n  }\n}\n\nfunction messageInput() {\n  const saveMessage = JSON.parse(localStorage.getItem(KEY));\n    if (saveMessage) {\n      messageEl.value = saveMessage.message;\n    }\n}\n\nfunction onFormSubmit(evn) {\n  const saveForm = JSON.parse(localStorage.getItem(KEY));\n  evn.preventDefault();\n  if (saveForm.message === undefined || saveForm.email === undefined) {\n    alert('Не все поля заполнены!');\n    return;\n  };\n  evn.target.reset();\n  localStorage.removeItem(KEY);\n  console.log(saveForm);\n}\n\nemailInput();\nmessageInput();"],"names":["saveEmail","saveMessage","$8TSCy","parcelRequire","$b00c40859be242c5$var$emailEl","document","querySelector","$b00c40859be242c5$var$messageEl","$b00c40859be242c5$var$formEl","$b00c40859be242c5$var$KEY","addEventListener","$parcel$interopDefault","$dCfNN","event","_target","target","name","value","parsed","JSON","parse","localStorage","getItem","formData","objectSpread","defineProperty","setItem","stringify","formData1","evn","saveForm","preventDefault","undefined","message","email","alert","reset","removeItem","console","log"],"version":3,"file":"03-feedback.dde0c1f6.js.map"}